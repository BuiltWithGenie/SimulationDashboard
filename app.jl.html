<header> <h1 style="margin-left:23px;font-size:35px">GenieSim </h1></header>
<div class="row">
    <div class="col-9 pr-20">
        <div class="row">
            <div class="st-col col-12 col-sm st-module" style="padding: 0px !important;">
                <plotly id="i8iv" :data="trace" :layout="layout" config="{'displaylogo':false}"></plotly>
            </div>
        </div>
        <div class="row pt-10">
            <div id="it9g5" class="st-col col-6 st-module p-5" style="padding-top: 25px !important;">
                <q-img id="i8f4a" src="diagram.png"></q-img>
            </div>
            <div class="st-col col-6  st-module pl-5 pr-5">
                <h2>Solar panel MPPT</h2><br>
                This dashboard simulates one of the examples in the <a href="https://ai4energy.github.io/Ai4EComponentLib.jl/dev/tutorials/Electrochemistry/#MPPT-Controller"> Ai4EComponentLib.jl</a> package, a library of ModelingToolkit models. The circuit implements a MPPT controller, which tracks the maximum voltage current (VI) value so that the system can charge the battery at the maximum power output.
            </div>
        </div>
    </div>
    <div class="col-3" style="height: 750px; overflow-y: auto;">
        <div id="ijrw7" class="st-col col-12">
            <div class="row">
                <h5>Simulation parameters</h5>
                <div id="ijtx" class="st-col st-module col-12 pl-4 pr-4 pb-4">
                    <q-select id="iyac5" v-model="selected_unknown" label="States to plot" :options="uknowns" :multiple="true" :use-chips="true"></q-select>
                    <q-input id="i9yu7" :dense="true" label="Duration (s)" type="number" v-model="T"></q-input>
                    <div id="iixr2">
                        <q-btn id="iwqy" label="Simulate" v-on:click="simulate = true" :disable="simulate" color="primary"></q-btn>
                    </div>
                </div>
            </div>
            <h5>Component configuration</h5>
<div style="height: 400px; overflow-y: auto;">
            <q-expansion-item
                    v-for="comp in component_names"
                    :key="comp"
                    :label="comp"
                    class="q-mb-sm b-2 border-white"
                    style="border-width:1px;border-radius:5px;border-color:steelblue;"
                    expand-separator
                    default-closed>


<q-expansion-item
                v-if="Object.keys(components[comp]['parameters']).length > 0"
                label="Parameters" icon="tune" class="b-2">
                <div v-for="(val, p) in components[comp]['parameters']" :key="p" class="bg-sky-900 pb-2">
                    <q-input
                        style="width:100%;max-width:80%"
                        class="ml-10"
                        :id="'param-' + comp + '-' + p"
                        :label="p"
                        v-model="components[comp]['parameters'][p]"
                        type="number">
                    </q-input>
                </div>
            </q-expansion-item>
            
            <q-expansion-item
                v-if="Object.keys(components[comp]['states']).length > 0"
                label="Initial state values" icon="timeline">
                <div v-for="(val, p) in components[comp]['states']" :key="p" class="bg-sky-900 pb-2">
                    <q-input
                        style="width:100%;max-width:80%"
                        class="ml-10"
                        :id="'state-' + comp + '-' + p"
                        :label="p + '(t)'"
                        v-model="components[comp]['states'][p]"
                        type="number">
                    </q-input>
                </div>
            </q-expansion-item>

                <q-expansion-item label="Equations" icon="functions">
                    <div class="shortColumn" class="bg-sky-900 pb-2">
                        <span class="shortColumn" style="max-width:100%" v-katex="{'options':{'errorColor':'#CC0000','displayMode':true,'throwOnError':false,'maxExpand':500,'strict':'warn','maxSize':'Infinity','allowedProtocols':[]},'expression':equations[comp]}"></span>
                    </div>
                </q-expansion-item>
            </q-expansion-item>
        </div>
        </div>
    </div>
</div>

